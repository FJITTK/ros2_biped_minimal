<?xml version="1.0"?>
<robot name="minimal_biped">

  
  <material name="grey"><color rgba="0.7 0.7 0.7 1.0"/></material>

  
  <link name="torso">
    <inertial>
      <origin xyz="0 0 0.15" rpy="0 0 0"/>
      <mass value="30"/>            
      <inertia ixx="0.05" ixy="0" ixz="0" iyy="0.05" iyz="0" izz="0.05"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.15" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 0.3"/></geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 0.15" rpy="0 0 0"/>
      <geometry><box size="0.1 0.1 0.3"/></geometry>
    </collision>
  </link>

  
  

  
  

  
  
  <joint name="right_hip_joint" type="revolute">
    <parent link="torso"/>
    <child  link="right_hip_link"/>
    <origin xyz="0 -0.05 0.05" rpy="0 0 0"/>   
    <axis xyz="0 1 0"/>                        
    <limit lower="-1.5"
           upper="1.5"
           effort="20" velocity="3.0"/>        
  </joint>

  <link name="right_hip_link">
    <inertial>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <mass value="5.0"/>                      
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
    <visual>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.2"/></geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.2"/></geometry>
    </collision>
  </link>

  
  <joint name="right_knee_joint" type="revolute">
    <parent link="right_hip_link"/>
    <child  link="right_knee_link"/>
    <origin xyz="0 0 -0.2" rpy="0 0 0"/>       
    <axis xyz="0 1 0"/>                        
    <limit lower="0.0"
           upper="2.0"
           effort="20" velocity="3.0"/>        
  </joint>

  <link name="right_knee_link">
    <inertial>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <mass value="5.0"/>                      
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
    <visual>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.2"/></geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.2"/></geometry>
    </collision>
  </link>

  
  <joint name="right_ankle_fixed" type="fixed">
    <parent link="right_knee_link"/>
    <child  link="right_foot"/>
    <origin xyz="0 0 -0.2" rpy="0 0 0"/>
  </joint>

  <link name="right_foot">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="3.0"/>                      
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><box size="0.06 0.03 0.01"/></geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><box size="0.06 0.03 0.01"/></geometry>
    </collision>
  </link>

  
  
  
  

 
  
  <joint name="left_hip_joint" type="revolute">
    <parent link="torso"/>
    <child  link="left_hip_link"/>
    <origin xyz="0 0.05 0.05" rpy="0 0 0"/>   
    <axis xyz="0 1 0"/>                        
    <limit lower="-1.5"
           upper="1.5"
           effort="20" velocity="3.0"/>        
  </joint>

  <link name="left_hip_link">
    <inertial>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <mass value="5.0"/>                      
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
    <visual>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.2"/></geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.2"/></geometry>
    </collision>
  </link>


  
  <joint name="left_knee_joint" type="revolute">
    <parent link="left_hip_link"/>
    <child  link="left_knee_link"/>
    <origin xyz="0 0 -0.2" rpy="0 0 0"/>       
    <axis xyz="0 1 0"/>                        
    <limit lower="0.0"
           upper="2.0"
           effort="20" velocity="3.0"/>        
  </joint>

  <link name="left_knee_link">
    <inertial>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <mass value="5.0"/>                      
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
    <visual>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.2"/></geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <geometry><cylinder radius="0.03" length="0.2"/></geometry>
    </collision>
  </link>

  
  <joint name="left_ankle_fixed" type="fixed">
    <parent link="left_knee_link"/>
    <child  link="left_foot"/>
    <origin xyz="0 0 -0.2" rpy="0 0 0"/>
  </joint>

  <link name="left_foot">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="3.0"/>                      
      <inertia ixx="0.001" ixy="0" ixz="0" iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><box size="0.06 0.03 0.01"/></geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><box size="0.06 0.03 0.01"/></geometry>
    </collision>
  </link>

  

<ros2_control name="biped_system" type="system">
  <hardware>
    <plugin>gazebo_ros2_control/GazeboSystem</plugin>
  </hardware>

  

  <joint name="left_hip_joint">
    <command_interface name="position"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>

  <joint name="left_knee_joint">
    <command_interface name="position"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>

  <joint name="right_hip_joint">
    <command_interface name="position"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>
  
  <joint name="right_knee_joint">
    <command_interface name="position"/>
    <state_interface name="position"/>
    <state_interface name="velocity"/>
  </joint>
</ros2_control>


<gazebo>
  <plugin name="gazebo_ros2_control" filename="libgazebo_ros2_control.so">
    <robot_param>robot_description</robot_param>
    <robot_param_node>/biped/robot_state_publisher</robot_param_node>
    <controller_manager_name>controller_manager</controller_manager_name>

    
    <parameters>/home/tatsu/ros2_ws/install/my_robot_description/share/my_robot_description/config/ros2_control.yaml</parameters>

    <ros>
      <namespace>biped</namespace>
    </ros>
  </plugin>
</gazebo>


</robot>

